<% layout('/layouts/boilerplate') %>

<div class="row mt-3">
  <div class="col-8 offset-2">
    <h3 class="mb-4">My Bookings üéüÔ∏è</h3>
    
    <% if(bookings.length === 0) { %>
      <div class="alert alert-warning p-4 rounded-4 shadow-sm">
        <h5>No trips booked yet! ‚úàÔ∏è</h5>
        <p class="mb-0">Time to pack your bags and explore.</p>
        <a href="/listings" class="btn btn-dark mt-3 rounded-pill px-4">Explore Listings</a>
      </div>
    <% } %>

    <div class="row">
  <% for(let booking of bookings) { %>
  <div class="col-12 mb-4">
    <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
      <div class="row g-0">
        
        <% if (booking.listing) { %>
          
          <div class="col-md-4">
            <img 
              src="<%= booking.listing.image.url %>" 
              class="img-fluid w-100 h-100" 
              style="object-fit: cover; min-height: 250px; max-height: 250px;" 
              alt="listing image"
            >
          </div>
          
          <% } else { %>
          <div class="col-12 p-4 text-center">
            <div class="alert alert-danger mb-0">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              <strong>Oops!</strong> The property for this booking has been removed by the owner.
              <br>
              <small>Check-in was scheduled for: <%= booking.checkIn.toLocaleDateString('en-IN') %></small>
            </div>
          </div>
        <% } %>

      </div>
    </div>
  </div>
  <% } %>
</div>
    
  </div>
</div>

